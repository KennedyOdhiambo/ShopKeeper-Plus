"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1055],{15836:(e,t,a)=>{a.d(t,{Z:()=>s});var r=a(31874);function s(){var e;let{data:t,isPending:a}=r.h.customers.listCustomers.useQuery({userId:"cba51dba-4308-453c-973a-0bb24c5fd6b4"}),s=null==t?void 0:t.customers,d=null==t?void 0:t.count;return{customerDropdownOptions:null!==(e=null==s?void 0:s.map(e=>({id:e.customerId,value:e.customerName})))&&void 0!==e?e:[],totalCount:d,customers:s,isPending:a}}},47338:(e,t,a)=>{a.d(t,{default:()=>u});var r=a(12428),s=a(48133),d=a(6969),l=a(90955),o=a(9341),n=a(2431),i=a(20914),c=a(31874);function u(){var e,t,a;let{register:u,handleSubmit:m,reset:f,formState:{errors:p}}=(0,n.cI)({resolver:(0,o.F)(l.A)}),{addCustomer:x,isPending:h}=function(e){let{toast:t}=(0,i.pm)(),a=c.h.useUtils(),{mutate:r,isPending:s}=c.h.customers.createCustomer.useMutation({onSuccess:r=>{"success"===r.status?(t({description:"Customer added succesfully",variant:"default"}),a.customers.listCustomers.invalidate(),e()):t({description:"Error adding customer",variant:"destructive"})},onError:e=>{console.error(e),t({description:"Network error,please try again",variant:"destructive"})}});return{addCustomer:r,isPending:s}}(f);return(0,r.jsxs)("form",{onSubmit:m(e=>{x({...e,userId:"cba51dba-4308-453c-973a-0bb24c5fd6b4"})}),className:"flex flex-col gap-y-5",children:[(0,r.jsx)(s.Z,{id:"customerName",label:"Customer Name",error:null===(e=p.customerName)||void 0===e?void 0:e.message,register:u("customerName")}),(0,r.jsx)(s.Z,{id:"phoneNumber",label:"Phone Number",error:null===(t=p.customerContact)||void 0===t?void 0:t.message,register:u("customerContact")}),(0,r.jsx)(s.Z,{id:"kraPin",label:"KRA Pin (optional)",error:null===(a=p.kraPin)||void 0===a?void 0:a.message,register:u("kraPin")}),(0,r.jsx)("div",{className:"text-end",children:(0,r.jsx)(d.z,{type:"submit",children:h?"Creating ...":"Create Customer"})})]})}},50544:(e,t,a)=>{a.d(t,{default:()=>z,k:()=>_});var r=a(12428),s=a(38789),d=a(53995),l=a(6969),o=a(87479);let n=(0,a(55e3).Z)("UserRoundPlus",[["path",{d:"M2 21a8 8 0 0 1 13.292-6",key:"bjp14o"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M19 16v6",key:"tddt3s"}],["path",{d:"M22 19h-6",key:"vcuq98"}]]);var i=a(47338);function c(e){let{type:t}=e;return(0,r.jsxs)(o.Dialog,{children:[(0,r.jsx)(o.DialogTrigger,{asChild:!0,children:"icon"===t?(0,r.jsx)(l.z,{variant:"default",size:"icon",className:"rounded-full",children:(0,r.jsx)(n,{})}):(0,r.jsx)(l.z,{variant:"outline",size:"sm",children:"New Customer"})}),(0,r.jsxs)(o.DialogContent,{className:"w-[460px] rounded-sm",children:[(0,r.jsxs)(o.DialogHeader,{children:[(0,r.jsx)(o.DialogTitle,{children:"New Customer"}),(0,r.jsx)(o.DialogDescription,{children:"Add a new customer to your shop"})]}),(0,r.jsx)(i.default,{})]})]})}var u=a(29892),m=a(90707),f=a(78531),p=a(34549),x=a(13240),h=a(55480);function y(){let[e,t]=(0,h.v1)("date",h.mF),a=e=>{t(e)};return(0,r.jsxs)(m.J2,{children:[(0,r.jsx)(m.xo,{asChild:!0,children:(0,r.jsxs)(l.z,{variant:"outline",className:(0,u.cn)("w-[280px] justify-start text-left font-normal",!e&&"text-muted-foreground"),children:[(0,r.jsx)(f.Z,{className:"mr-2 h-4 w-4"}),e?(0,p.WU)(e,"PPP"):(0,r.jsx)("span",{children:"Sales Date"})]})}),(0,r.jsx)(m.yk,{className:"w-auto p-0",children:(0,r.jsx)(x.f,{mode:"single",selected:null!=e?e:new Date,onSelect:e=>a(null!=e?e:new Date)})})]})}var g=a(24134),v=a(47576),b=a(93264),j=a(20914),w=a(31874);function N(){var e;let t=(0,v.useSearchParams)(),{submitSale:a,paymentOption:s,customer:d,isPending:o}=function(){let[e,t]=(0,h.v1)("customer"),[a,r]=(0,h.v1)("payment",{defaultValue:"cash"}),{toast:s}=(0,j.pm)(),{mutate:d,isPending:l}=w.h.sales.newSales.useMutation({onSuccess:e=>{"success"===e.status?(s({description:e.message,variant:"default"}),t(null),r(null),setTimeout(()=>{window.location.reload()},500)):s({description:e.message,variant:"destructive"})},onError:e=>{s({description:"Error submitting data",variant:"destructive"}),console.error(e)}});return{submitSale:d,isPending:l,customer:e,paymentOption:a}}(),{salesItems:n}=(0,b.useContext)(g.W),i=null!==(e=t.get("date"))&&void 0!==e?e:new Date().toISOString(),c=Object.values(null!=n?n:{});return(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsx)(l.z,{size:"sm",className:"disabled:cursor-not-allowed",disabled:o||!c.length||!d||d.length<2,onClick:()=>{a({salesDate:i,paymentOption:s,customer:d,items:c,userId:"cba51dba-4308-453c-973a-0bb24c5fd6b4"})},children:o?"SUBMITTING...":"SUBMIT"})})}var C=a(15836);let _=[{id:"cash",value:"Cash"},{id:"mpesa",value:"M-Pesa"},{id:"credit",value:"Credit"}];function z(){let{customerDropdownOptions:e}=(0,C.Z)();return(0,r.jsx)(d.Zb,{className:"flex flex-row justify-between border-0 bg-secondary shadow-none",children:(0,r.jsxs)(d.aY,{className:"flex w-full flex-row items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-1 pb-5 md:flex-row md:items-end md:gap-4",children:[(0,r.jsx)(y,{}),(0,r.jsx)(s.default,{queryId:"payment",options:_,placeholder:"Payment Option"}),(0,r.jsxs)("div",{className:"inline-flex items-end gap-1.5",children:[(0,r.jsx)(s.default,{queryId:"customer",options:null!=e?e:[],placeholder:"Customer"}),(0,r.jsx)(c,{type:"icon"})]})]}),(0,r.jsx)(N,{})]})})}},38789:(e,t,a)=>{a.d(t,{default:()=>o});var r=a(12428);a(93264);var s=a(70674),d=a(76484),l=a(55480);function o(e){let{queryId:t,placeholder:a,options:o,label:n,className:i}=e,[c,u]=(0,l.v1)(t),m=o.find(e=>e.id===c);return(0,r.jsxs)("div",{className:"".concat(i," flex w-[280px] flex-col space-y-2"),children:[(0,r.jsx)(d._,{children:n}),(0,r.jsxs)(s.Ph,{onValueChange:e=>u(e),children:[(0,r.jsx)(s.i4,{children:(0,r.jsx)(s.ki,{placeholder:c?null==m?void 0:m.value:a})}),(0,r.jsx)(s.Bw,{children:o.map(e=>(0,r.jsx)(s.Ql,{value:e.id,children:e.value},e.id))})]})]})}},13240:(e,t,a)=>{a.d(t,{f:()=>o});var r=a(12428);a(93264);var s=a(42585),d=a(29892),l=a(6969);function o(e){let{className:t,classNames:a,showOutsideDays:o=!0,...n}=e;return(0,r.jsx)(s._W,{showOutsideDays:o,className:(0,d.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,d.cn)((0,l.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,d.cn)((0,l.d)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{},...n})}o.displayName="Calendar"},53995:(e,t,a)=>{a.d(t,{Ol:()=>o,Zb:()=>l,aY:()=>i,ll:()=>n});var r=a(12428),s=a(93264),d=a(29892);let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,d.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});l.displayName="Card";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...s})});o.displayName="CardHeader";let n=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("h3",{ref:t,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});n.displayName="CardTitle",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("p",{ref:t,className:(0,d.cn)("text-sm text-muted-foreground",a),...s})}).displayName="CardDescription";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,d.cn)(" py-3 px-6",a),...s})});i.displayName="CardContent",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,d.cn)("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter"},90707:(e,t,a)=>{a.d(t,{J2:()=>o,xo:()=>n,yk:()=>i});var r=a(12428),s=a(93264),d=a(94132),l=a(29892);let o=d.fC,n=d.xz,i=s.forwardRef((e,t)=>{let{className:a,align:s="center",sideOffset:o=4,...n}=e;return(0,r.jsx)(d.h_,{children:(0,r.jsx)(d.VY,{ref:t,align:s,sideOffset:o,className:(0,l.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})})});i.displayName=d.VY.displayName},70674:(e,t,a)=>{a.d(t,{Bw:()=>x,Ph:()=>c,Ql:()=>h,i4:()=>m,ki:()=>u});var r=a(12428),s=a(93264),d=a(49786),l=a(95018),o=a(15631),n=a(32793),i=a(29892);let c=d.fC;d.ZA;let u=d.B4,m=s.forwardRef((e,t)=>{let{className:a,children:s,...o}=e;return(0,r.jsxs)(d.xz,{ref:t,className:(0,i.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...o,children:[s,(0,r.jsx)(d.JO,{asChild:!0,children:(0,r.jsx)(l.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=d.xz.displayName;let f=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(d.u_,{ref:t,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(o.Z,{className:"h-4 w-4"})})});f.displayName=d.u_.displayName;let p=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(d.$G,{ref:t,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(l.Z,{className:"h-4 w-4"})})});p.displayName=d.$G.displayName;let x=s.forwardRef((e,t)=>{let{className:a,children:s,position:l="popper",...o}=e;return(0,r.jsx)(d.h_,{children:(0,r.jsxs)(d.VY,{ref:t,className:(0,i.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...o,children:[(0,r.jsx)(f,{}),(0,r.jsx)(d.l_,{className:(0,i.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,r.jsx)(p,{})]})})});x.displayName=d.VY.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(d.__,{ref:t,className:(0,i.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...s})}).displayName=d.__.displayName;let h=s.forwardRef((e,t)=>{let{className:a,children:s,...l}=e;return(0,r.jsxs)(d.ck,{ref:t,className:(0,i.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(d.wU,{children:(0,r.jsx)(n.Z,{className:"h-4 w-4"})})}),(0,r.jsx)(d.eT,{children:s})]})});h.displayName=d.ck.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(d.Z0,{ref:t,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",a),...s})}).displayName=d.Z0.displayName},60392:(e,t,a)=>{a.d(t,{Tooltip:()=>n,TooltipContent:()=>c,TooltipProvider:()=>o,TooltipTrigger:()=>i});var r=a(12428),s=a(93264),d=a(36306),l=a(29892);let o=d.zt,n=d.fC,i=d.xz,c=s.forwardRef((e,t)=>{let{className:a,sideOffset:s=4,...o}=e;return(0,r.jsx)(d.VY,{ref:t,sideOffset:s,className:(0,l.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...o})});c.displayName=d.VY.displayName},24134:(e,t,a)=>{a.d(t,{W:()=>d,Z:()=>l});var r=a(12428),s=a(93264);let d=(0,s.createContext)(null);function l(e){let{children:t}=e,[a,l]=(0,s.useState)(null);return(0,r.jsx)(d.Provider,{value:{salesItems:a,setSalesItems:l},children:t})}},90955:(e,t,a)=>{a.d(t,{A:()=>s});var r=a(95772);let s=r.z.object({customerName:r.z.string().min(2,{message:"Valid customer name is required"}),customerContact:r.z.string().min(10,{message:"Phone number should be atleast 10 characters"}),kraPin:r.z.string().optional()})},21671:(e,t,a)=>{a.d(t,{Z:()=>r});let r=(0,a(55e3).Z)("Delete",[["path",{d:"M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z",key:"1yo7s0"}],["path",{d:"m12 9 6 6",key:"anjzzh"}],["path",{d:"m18 9-6 6",key:"1fp51s"}]])}}]);