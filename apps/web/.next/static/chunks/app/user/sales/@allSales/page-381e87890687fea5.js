(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3183],{1097:(e,s,t)=>{Promise.resolve().then(t.bind(t,20079)),Promise.resolve().then(t.bind(t,48268))},20079:(e,s,t)=>{"use strict";t.d(s,{default:()=>i});var l=t(12428),a=t(38789),r=t(54611),n=t(50544),o=t(15836);function i(){let{customerDropdownOptions:e}=(0,o.Z)();return(0,l.jsxs)("div",{className:"hidden gap-5 lg:flex lg:flex-row lg:items-end",children:[(0,l.jsx)(a.default,{queryId:"payment",options:[{id:"all",value:"All"},...n.k],placeholder:"Payment Method"}),(0,l.jsx)(a.default,{queryId:"customer",options:[{id:"all",value:"All Customers"},...e],placeholder:"Select Customer"}),(0,l.jsx)(r.default,{})]})}},48268:(e,s,t)=>{"use strict";t.d(s,{default:()=>y});var l=t(12428),a=t(6969);let r=(0,t(55e3).Z)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var n=t(47576);function o(e){let{salesId:s}=e,t=(0,n.useRouter)();return(0,l.jsxs)(a.z,{onClick:()=>{t.push("sales-details/".concat(s))},variant:"link",className:"inline-flex flex-row gap-1",children:[(0,l.jsx)("span",{children:"Items"}),(0,l.jsx)(r,{className:"size-4"})]})}t(93264);var i=t(60392),d=t(31874),u=t(36306),c=t(21671),m=t(78076),h=t(78530),v=t(20914);function p(e){let{rowId:s}=e,{toast:t}=(0,v.pm)(),r=d.h.useUtils(),{mutate:n,isPending:o}=d.h.sales.deleteSale.useMutation({onSuccess:e=>{"success"===e.status?(t({description:e.message,variant:"default"}),r.sales.listPaginatedSales.invalidate(),r.sales.listSales.invalidate()):t({description:e.message,variant:"destructive"})},onError:e=>{console.error(e),t({description:"Network error,please try again",variant:"destructive"})}});return(0,l.jsx)(i.TooltipProvider,{children:(0,l.jsxs)(i.Tooltip,{children:[(0,l.jsx)(i.TooltipTrigger,{asChild:!0,children:(0,l.jsx)(a.z,{onClick:()=>{n({salesId:s})},variant:"outline",size:"icon",className:"border-2.5 rounded-lg transition-colors duration-200 hover:bg-destructive hover:text-white",children:o?(0,l.jsx)(h.default,{src:m.Z,alt:"..."}):(0,l.jsx)(c.Z,{})})}),(0,l.jsx)(u._v,{className:"rounded-md border bg-popover p-1",children:(0,l.jsx)("p",{children:"Delete"})})]})})}let x=[{accessorKey:"customerName",header:"Customer"},{accessorKey:"salesDate",header:"Sales Date"},{accessorKey:"paymentOption",header:"Payment Method"},{accessorKey:"totalCost",header:"Amount"},{header:"Sales Items",cell:e=>{let{row:s}=e;return(0,l.jsx)(o,{salesId:s.original.salesId})}},{header:"Action",cell:e=>{let{row:s}=e;return(0,l.jsx)(p,{rowId:s.original.salesId})}}];var f=t(72171),g=t(29892),j=t(21117);function y(){var e;let{salesWithCustomers:s,totalCount:t,isPending:a}=function(){let e=(0,n.useSearchParams)(),s=e.get("from"),t=e.get("to"),l=e.get("payment"),a=e.get("customer"),r=e.get("page"),{data:o,isPending:i}=d.h.sales.listPaginatedSales.useQuery({startDate:null!=s?s:void 0,endDate:null!=t?t:void 0,paymentMethod:l?"all"===l?void 0:l:void 0,customerId:a?"all"===a?void 0:a:void 0,page:null!=r?r:"0"});return{salesData:null==o?void 0:o.sales.map(e=>e.sales),salesWithCustomers:null==o?void 0:o.sales,isPending:i,totalCount:null==o?void 0:o.totalCount}}(),r=null!==(e=null==s?void 0:s.map(e=>{var s,t,l,a;return{salesId:e.sales.salesId,salesDate:e.sales.salesDate,customerName:null===(s=e.customers)||void 0===s?void 0:s.customerName,paymentOption:null!==(l=null===(t=e.sales.paymentOption)||void 0===t?void 0:t.toUpperCase())&&void 0!==l?l:"",totalCost:(0,g.lb)(null!==(a=e.sales.totalCost)&&void 0!==a?a:"")}}))&&void 0!==e?e:[];return a?(0,l.jsx)(j.M,{rows:10}):(0,l.jsx)("div",{children:(0,l.jsx)(f.Z,{rowCount:null!=t?t:0,columns:x,data:null!=r?r:[]})})}},54611:(e,s,t)=>{"use strict";t.d(s,{default:()=>v});var l=t(12428),a=t(29892),r=t(59766),n=t(34549),o=t(93264),i=t(90707),d=t(6969),u=t(78531),c=t(69873),m=t(13240),h=t(55480);function v(e){let{className:s}=e,[t,v]=(0,h.XI)({from:h.mF.withDefault((0,r.e)(new Date,1)),to:h.mF.withDefault(new Date)},{history:"replace"}),[p,x]=(0,o.useState)(t);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:(0,a.cn)("grid gap-2",s),children:(0,l.jsxs)(i.J2,{children:[(0,l.jsx)(i.xo,{asChild:!0,children:(0,l.jsxs)(d.z,{id:"date",variant:"outline",className:(0,a.cn)("w-[300px] justify-start text-left font-normal",!t&&"text-muted-foreground"),children:[(0,l.jsx)(u.Z,{className:"mr-2 h-4 w-4"}),(null==p?void 0:p.from)?p.to?(0,l.jsxs)(l.Fragment,{children:[(0,n.WU)(p.from,"LLL dd, y")," - ",(0,n.WU)(p.to,"LLL dd, y")]}):(0,n.WU)(p.from,"LLL dd, y"):(0,l.jsx)("span",{children:"Pick a date"})]})}),(0,l.jsx)(i.yk,{className:"mr-1 w-auto p-0",align:"start",children:(0,l.jsx)(m.f,{mode:"range",defaultMonth:null==p?void 0:p.from,selected:p,onSelect:e=>{x(e)},numberOfMonths:2})})]})}),(0,l.jsxs)(d.z,{className:"inline-flex gap-2",onClick:()=>{v(p)},children:[(0,l.jsx)(c.Z,{className:"size-5"}),(0,l.jsx)("span",{children:"Filter"})]})]})}},69873:(e,s,t)=>{"use strict";t.d(s,{Z:()=>l});let l=(0,t(55e3).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},59766:(e,s,t)=>{"use strict";t.d(s,{e:()=>a});var l=t(52127);function a(e,s,t){return(0,l.B)(e,-s,t)}}},e=>{var s=s=>e(e.s=s);e.O(0,[2631,3612,4766,2865,9986,5480,7885,1868,8776,223,6306,1022,8630,2200,1055,8752,5648,1744],()=>s(1097)),_N_E=e.O()}]);