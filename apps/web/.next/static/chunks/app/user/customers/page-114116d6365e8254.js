(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[201],{71519:(e,r,s)=>{Promise.resolve().then(s.bind(s,77741))},15836:(e,r,s)=>{"use strict";s.d(r,{Z:()=>o});var t=s(31874);function o(){var e;let{data:r,isPending:s}=t.h.customers.listCustomers.useQuery({userId:"cba51dba-4308-453c-973a-0bb24c5fd6b4"}),o=null==r?void 0:r.customers,i=null==r?void 0:r.count;return{customerDropdownOptions:null!==(e=null==o?void 0:o.map(e=>({id:e.customerId,value:e.customerName})))&&void 0!==e?e:[],totalCount:i,customers:o,isPending:s}}},77741:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>y});var t=s(12428),o=s(72171),i=s(21117),a=s(61761),l=s(6969),n=s(60392),d=s(20914),u=s(31874),c=s(21671),m=s(87479),h=s(39678),p=s(48133),v=s(90955),x=s(9341),g=s(2431);function f(e){var r,s,o,i,a;let{customerId:n}=e,{toast:c}=(0,d.pm)(),m=u.h.useUtils(),{data:h}=u.h.customers.getCustomer.useQuery({customerId:n}),f=null==h?void 0:h.cusromer,{register:j,handleSubmit:b,reset:N,formState:{errors:C}}=(0,g.cI)({resolver:(0,x.F)(v.A)}),{mutate:y,isPending:z}=u.h.customers.editCustomer.useMutation({onSuccess:e=>{"success"===e.status?(c({description:e.message,variant:"default"}),m.customers.listCustomers.invalidate(),N()):c({description:e.message,variant:"destructive"})},onError:e=>{console.error(e),c({description:"Network error,please try again",variant:"destructive"})}});return(0,t.jsxs)("form",{onSubmit:b(e=>{y({...e,customerId:n})}),className:"flex flex-col gap-y-5",children:[(0,t.jsx)(p.Z,{id:"customerName",label:"Customer Name",error:null===(r=C.customerName)||void 0===r?void 0:r.message,register:j("customerName"),defaultValue:null==f?void 0:f.customerName}),(0,t.jsx)(p.Z,{id:"phoneNumber",label:"Phone Number",error:null===(s=C.customerContact)||void 0===s?void 0:s.message,register:j("customerContact"),defaultValue:null!==(i=null==f?void 0:f.customerContact)&&void 0!==i?i:""}),(0,t.jsx)(p.Z,{id:"kraPin",label:"KRA Pin (optional)",error:null===(o=C.kraPin)||void 0===o?void 0:o.message,register:j("kraPin"),defaultValue:null!==(a=null==f?void 0:f.kraPin)&&void 0!==a?a:""}),(0,t.jsx)("div",{className:"text-end",children:(0,t.jsx)(l.z,{type:"submit",children:z?"Updating ...":"Update Customer"})})]})}function j(e){let{customerId:r}=e;return(0,t.jsx)("div",{children:(0,t.jsxs)(m.Dialog,{children:[(0,t.jsx)(m.DialogTrigger,{asChild:!0,children:(0,t.jsx)(l.z,{variant:"outline",size:"icon",className:"border-2.5 rounded-full p-1 text-secondary-foreground transition-colors duration-200 hover:bg-primary hover:text-white",children:(0,t.jsx)(n.TooltipProvider,{children:(0,t.jsxs)(n.Tooltip,{children:[(0,t.jsx)(n.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(h.Z,{className:"size-5"})}),(0,t.jsx)(n.TooltipContent,{className:"rounded-md border bg-popover p-1",children:(0,t.jsx)("p",{children:"Edit"})})]})})})}),(0,t.jsxs)(m.DialogContent,{className:"w-[460px] rounded-sm",children:[(0,t.jsxs)(m.DialogHeader,{children:[(0,t.jsx)(m.DialogTitle,{children:"New Customer"}),(0,t.jsx)(m.DialogDescription,{children:"Add a new customer to your shop"})]}),(0,t.jsx)(f,{customerId:r})]})]})})}function b(e){let{rowId:r}=e,{toast:s}=(0,d.pm)(),o=u.h.useUtils(),{mutate:i,isPending:m}=u.h.customers.deleteCustomer.useMutation({onSuccess:e=>{"success"===e.status?(s({description:e.message,variant:"default"}),o.customers.listCustomers.invalidate()):s({description:e.message,variant:"destructive"})},onError:e=>{console.error(e),s({description:"Network error,please try again",variant:"destructive"})}});return(0,t.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,t.jsx)(j,{customerId:r}),(0,t.jsx)(n.TooltipProvider,{children:(0,t.jsxs)(n.Tooltip,{children:[(0,t.jsx)(n.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(l.z,{onClick:()=>{i({customerId:r})},variant:"outline",size:"icon",className:"border-2.5 rounded-full transition-colors duration-200 hover:bg-destructive hover:text-white",children:m?(0,t.jsx)(a.Z,{}):(0,t.jsx)(c.Z,{className:"size-5"})})}),(0,t.jsx)(n.TooltipContent,{className:"rounded-md border bg-popover p-1",children:(0,t.jsx)("p",{children:"Delete"})})]})})]})}let N=[{accessorKey:"customerName",header:"Customer Name"},{accessorKey:"customerContact",header:"Customer Contact"},{accessorKey:"kraPin",header:"KRA Pin"},{header:"Action",cell:e=>{let{row:r}=e,s=r.original;return(0,t.jsx)(b,{rowId:s.customerId})}}];var C=s(15836);function y(){let{customers:e,totalCount:r,isPending:s}=(0,C.Z)();return s?(0,t.jsx)(i.M,{rows:10}):(0,t.jsx)("div",{children:(0,t.jsx)(o.Z,{columns:N,data:null!=e?e:[],rowCount:null!=r?r:0})})}},61761:(e,r,s)=>{"use strict";s.d(r,{Z:()=>a});var t=s(12428),o=s(78530),i=s(78076);function a(){return(0,t.jsx)(o.default,{src:i.Z,alt:"..."})}},60392:(e,r,s)=>{"use strict";s.d(r,{Tooltip:()=>n,TooltipContent:()=>u,TooltipProvider:()=>l,TooltipTrigger:()=>d});var t=s(12428),o=s(93264),i=s(36306),a=s(29892);let l=i.zt,n=i.fC,d=i.xz,u=o.forwardRef((e,r)=>{let{className:s,sideOffset:o=4,...l}=e;return(0,t.jsx)(i.VY,{ref:r,sideOffset:o,className:(0,a.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...l})});u.displayName=i.VY.displayName},90955:(e,r,s)=>{"use strict";s.d(r,{A:()=>o});var t=s(95772);let o=t.z.object({customerName:t.z.string().min(2,{message:"Valid customer name is required"}),customerContact:t.z.string().min(10,{message:"Phone number should be atleast 10 characters"}),kraPin:t.z.string().optional()})},21671:(e,r,s)=>{"use strict";s.d(r,{Z:()=>t});let t=(0,s(55e3).Z)("Delete",[["path",{d:"M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z",key:"1yo7s0"}],["path",{d:"m12 9 6 6",key:"anjzzh"}],["path",{d:"m18 9-6 6",key:"1fp51s"}]])},39678:(e,r,s)=>{"use strict";s.d(r,{Z:()=>t});let t=(0,s(55e3).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])}},e=>{var r=r=>e(e.s=r);e.O(0,[2631,3612,4766,2865,9986,5480,7885,1868,8776,223,6306,2200,8752,5648,1744],()=>r(71519)),_N_E=e.O()}]);