(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5585],{54628:(e,s,n)=>{Promise.resolve().then(n.bind(n,42827)),Promise.resolve().then(n.bind(n,76363)),Promise.resolve().then(n.bind(n,87479))},42827:(e,s,n)=>{"use strict";n.d(s,{default:()=>D});var r=n(12428),i=n(72171);n(93264);var t=n(61761),a=n(6969),o=n(60392),l=n(21671),d=n(87479),p=n(39678),c=n(48133),u=n(20914),x=n(31874),m=n(60744),v=n(9341),g=n(2431);function h(e){var s,n,i,o,l,d,p,h,f,j,b,y;let{expenseId:E}=e,{toast:D}=(0,u.pm)(),R=x.h.useUtils(),{data:z}=x.h.expense.getExpenseDetails.useQuery({expenseId:E}),{register:N,formState:{errors:Z},reset:P,getValues:k}=(0,g.cI)({resolver:(0,v.F)(m._)}),{mutate:w,isPending:T}=x.h.expense.updateExpense.useMutation({onSuccess:e=>{"success"===e.status?(D({description:e.message,variant:"default"}),R.expense.listExpenses.invalidate(),R.expense.listPaginatedExpense.invalidate(),P()):D({description:e.message,variant:"destructive"})},onError:e=>{console.error(e),D({description:"Network error,please try again",variant:"destructive"})}});return(0,r.jsxs)("form",{className:"flex flex-col gap-y-5",children:[(0,r.jsx)(c.Z,{id:"expenseRecipient",label:"Expense Recipient",error:null===(s=Z.expenseRecipient)||void 0===s?void 0:s.message,register:N("expenseRecipient"),defaultValue:null!==(f=null==z?void 0:null===(n=z.expense)||void 0===n?void 0:n.expenseRecipient)&&void 0!==f?f:""}),(0,r.jsx)(c.Z,{type:"number",id:"expenseAmount",label:"Expense Amount",error:null===(i=Z.expenseAmount)||void 0===i?void 0:i.message,register:N("expenseAmount"),defaultValue:null!==(j=null==z?void 0:null===(o=z.expense)||void 0===o?void 0:o.expenseAmount)&&void 0!==j?j:""}),(0,r.jsx)(c.Z,{id:"expenseReference",label:"Expense Reference",error:null===(l=Z.expenseReference)||void 0===l?void 0:l.message,register:N("expenseReference"),defaultValue:null!==(b=null==z?void 0:null===(d=z.expense)||void 0===d?void 0:d.expenseReference)&&void 0!==b?b:""}),(0,r.jsx)(c.Z,{id:"expenseDescription",label:"Expense Description",error:null===(p=Z.expenseDescription)||void 0===p?void 0:p.message,register:N("expenseDescription"),defaultValue:null!==(y=null==z?void 0:null===(h=z.expense)||void 0===h?void 0:h.expenseDescription)&&void 0!==y?y:""}),(0,r.jsx)("div",{className:"text-end",children:(0,r.jsx)(a.z,{className:"w-[140px]",type:"button",onClick:()=>{let e=k();e.expenseId=E,w(e)},children:T?(0,r.jsx)(t.Z,{}):"Update Expense"})})]})}function f(e){let{expenseId:s}=e;return(0,r.jsxs)(d.Dialog,{children:[(0,r.jsx)(d.DialogTrigger,{asChild:!0,children:(0,r.jsx)(a.z,{variant:"outline",size:"icon",className:"border-2.5 rounded-full p-1 text-secondary-foreground transition-colors duration-200 hover:bg-primary hover:text-white",children:(0,r.jsx)(o.TooltipProvider,{children:(0,r.jsxs)(o.Tooltip,{children:[(0,r.jsx)(o.TooltipTrigger,{asChild:!0,children:(0,r.jsx)(p.Z,{className:"size-5"})}),(0,r.jsx)(o.TooltipContent,{className:"rounded-md border bg-popover p-1",children:(0,r.jsx)("p",{children:"Edit"})})]})})})}),(0,r.jsxs)(d.DialogContent,{className:"w-[460px] rounded-sm",children:[(0,r.jsxs)(d.DialogHeader,{children:[(0,r.jsx)(d.DialogTitle,{children:"Update Expense Details"}),(0,r.jsx)(d.DialogDescription,{children:"Update details of expense"})]}),(0,r.jsx)(h,{expenseId:s})]})]})}function j(e){let{expenseId:s}=e,n=x.h.useUtils(),{toast:i}=(0,u.pm)(),{mutate:d,isPending:p}=x.h.expense.deleteExpense.useMutation({onSuccess:e=>{"success"===e.status?(i({description:e.message,variant:"default"}),n.expense.listExpenses.invalidate(),n.expense.listPaginatedExpense.invalidate()):i({description:e.message,variant:"destructive"})},onError:e=>{console.error(e),i({description:"Network error,please try again",variant:"destructive"})}});return(0,r.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,r.jsx)(f,{expenseId:s}),(0,r.jsx)(o.TooltipProvider,{children:(0,r.jsxs)(o.Tooltip,{children:[(0,r.jsx)(o.TooltipTrigger,{asChild:!0,children:(0,r.jsx)(a.z,{onClick:()=>{d({expenseId:s})},variant:"outline",size:"icon",className:"border-2.5 rounded-full transition-colors duration-200 hover:bg-destructive hover:text-white",children:p?(0,r.jsx)(t.Z,{}):(0,r.jsx)(l.Z,{className:"size-5"})})}),(0,r.jsx)(o.TooltipContent,{className:"rounded-md border bg-popover p-1",children:(0,r.jsx)("p",{children:"Delete"})})]})})]})}let b=[{accessorKey:"paymenDate",header:"Expense Date"},{accessorKey:"expenseRecipient",header:"Recipient"},{accessorKey:"expenseReference",header:"Reference"},{accessorKey:"expenseDescription",header:"Description"},{accessorKey:"expenseAmount",header:"Expense Amount"},{accessorKey:"expenseId",header:()=>(0,r.jsx)("div",{className:"text-center",children:"Action"}),cell:e=>{let{row:s}=e,n=s.original;return(0,r.jsx)(j,{expenseId:n.expenseId})}}];var y=n(47576),E=n(21117);function D(){var e;let s=null!==(e=(0,y.useSearchParams)().get("page"))&&void 0!==e?e:"0",{data:n,isPending:t}=x.h.expense.listPaginatedExpense.useQuery({page:s,userId:"cba51dba-4308-453c-973a-0bb24c5fd6b4"}),a=null==n?void 0:n.expenses,o=null==n?void 0:n.count;return t?(0,r.jsx)(E.M,{rows:10}):(0,r.jsx)("div",{children:(0,r.jsx)(i.Z,{columns:b,data:null!=a?a:[],rowCount:null!=o?o:0})})}},76363:(e,s,n)=>{"use strict";n.d(s,{default:()=>u});var r=n(12428),i=n(48133),t=n(61761),a=n(6969),o=n(20914),l=n(31874),d=n(60744),p=n(9341),c=n(2431);function u(){var e,s,n,u;let{toast:x}=(0,o.pm)(),m=l.h.useUtils(),{register:v,formState:{errors:g},reset:h,getValues:f}=(0,c.cI)({resolver:(0,p.F)(d.k)}),{mutate:j,isPending:b}=l.h.expense.createExpense.useMutation({onSuccess:e=>{"success"===e.status?(x({description:e.message,variant:"default"}),m.expense.listExpenses.invalidate(),m.expense.listPaginatedExpense.invalidate(),h()):x({description:e.message,variant:"destructive"})},onError:e=>{console.error(e),x({description:"Network error,please try again",variant:"destructive"})}});return(0,r.jsxs)("form",{className:"flex flex-col gap-y-5",children:[(0,r.jsx)(i.Z,{id:"expenseRecipient",label:"Expense Recipient",error:null===(e=g.expenseRecipient)||void 0===e?void 0:e.message,register:v("expenseRecipient")}),(0,r.jsx)(i.Z,{type:"number",id:"expenseAmount",label:"Expense Amount",error:null===(s=g.expenseAmount)||void 0===s?void 0:s.message,register:v("expenseAmount")}),(0,r.jsx)(i.Z,{id:"expenseReference",label:"Expense Reference",error:null===(n=g.expenseReference)||void 0===n?void 0:n.message,register:v("expenseReference")}),(0,r.jsx)(i.Z,{id:"expenseDescription",label:"Expense Description",error:null===(u=g.expenseDescription)||void 0===u?void 0:u.message,register:v("expenseDescription")}),(0,r.jsx)("div",{className:"text-end",children:(0,r.jsx)(a.z,{className:"w-[140px]",type:"button",onClick:()=>{let e=f();e.paymenDate=new Date().toISOString(),e.userId="cba51dba-4308-453c-973a-0bb24c5fd6b4",j(e)},children:b?(0,r.jsx)(t.Z,{}):"Add Expense"})})]})}},61761:(e,s,n)=>{"use strict";n.d(s,{Z:()=>a});var r=n(12428),i=n(78530),t=n(78076);function a(){return(0,r.jsx)(i.default,{src:t.Z,alt:"..."})}},60392:(e,s,n)=>{"use strict";n.d(s,{Tooltip:()=>l,TooltipContent:()=>p,TooltipProvider:()=>o,TooltipTrigger:()=>d});var r=n(12428),i=n(93264),t=n(36306),a=n(29892);let o=t.zt,l=t.fC,d=t.xz,p=i.forwardRef((e,s)=>{let{className:n,sideOffset:i=4,...o}=e;return(0,r.jsx)(t.VY,{ref:s,sideOffset:i,className:(0,a.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...o})});p.displayName=t.VY.displayName},60744:(e,s,n)=>{"use strict";n.d(s,{_:()=>t,k:()=>i});var r=n(95772);let i=r.z.object({userId:r.z.string().min(2,{message:"UserId is required"}),expenseAmount:r.z.string(),expenseRecipient:r.z.string().min(2,{message:"Recipient is required"}),expenseReference:r.z.string().min(2,{message:"Reference is required"}),expenseDescription:r.z.string().nullable(),paymenDate:r.z.string().min(2,{message:"Date is required"})}),t=i.omit({userId:!0,paymenDate:!0}).extend({expenseId:r.z.string()})},21671:(e,s,n)=>{"use strict";n.d(s,{Z:()=>r});let r=(0,n(55e3).Z)("Delete",[["path",{d:"M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z",key:"1yo7s0"}],["path",{d:"m12 9 6 6",key:"anjzzh"}],["path",{d:"m18 9-6 6",key:"1fp51s"}]])},39678:(e,s,n)=>{"use strict";n.d(s,{Z:()=>r});let r=(0,n(55e3).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},47576:(e,s,n)=>{"use strict";var r=n(96151);n.o(r,"useParams")&&n.d(s,{useParams:function(){return r.useParams}}),n.o(r,"useRouter")&&n.d(s,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(s,{useSearchParams:function(){return r.useSearchParams}})}},e=>{var s=s=>e(e.s=s);e.O(0,[2631,3612,4766,2865,9986,5480,7885,1868,8776,223,6306,2200,8752,5648,1744],()=>s(54628)),_N_E=e.O()}]);