(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5456],{81835:(e,r,t)=>{Promise.resolve().then(t.bind(t,1102))},1102:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>m});var l=t(12428),s=t(6969),a=t(53995),n=t(76484),i=t(29892);t(93264);var d=t(31874);let o=[{accessorKey:"item",header:"Sales Item"},{accessorKey:"quantity",header:"Sold Quantity"},{accessorKey:"unitCost",header:"Unit Cost",cell:e=>{let{row:r}=e;return(0,i.lb)(r.original.unitCost)}},{header:"Total Cost",cell:e=>{let{row:r}=e,t=r.original;return(0,l.jsx)("span",{children:(0,i.lb)(+t.quantity*+t.unitCost)})}}];var c=t(72171),u=t(47576);function m(){var e;let{salesId:r}=(0,u.useParams)(),{salesDetails:t,itemsWithInventory:m,customer:f}=function(e){let r,t;let{data:l,isPending:s}=d.h.salesItems.listSalesItems.useQuery({salesId:e});(null==l?void 0:l.status)==="success"&&(r=l),(null==l?void 0:l.status)==="error"&&(t=l);let a=null==r?void 0:r.customer;return{customer:a,itemsWithInventory:null==r?void 0:r.salesItemsAndInventory,creditEntry:null==r?void 0:r.credit,salesDetails:null==r?void 0:r.sales,errorResponse:t,isPending:s}}(r),x=null==m?void 0:m.map(e=>{var r,t,l,s,a,n;return{salesItemId:null!==(l=e.sales_items.salesItemId)&&void 0!==l?l:"",item:null!==(s=null===(r=e.items)||void 0===r?void 0:r.itemName)&&void 0!==s?s:"",quantity:String(null!==(a=e.sales_items.salesQuantity)&&void 0!==a?a:""),unitCost:null!==(n=null===(t=e.inventory)||void 0===t?void 0:t.sellingPrice)&&void 0!==n?n:""}});return(0,l.jsxs)("section",{className:"mt-6 flex w-full flex-col gap-5",children:[(0,l.jsx)(a.Zb,{className:"flex flex-row justify-between border-0 bg-secondary shadow-none",children:(0,l.jsxs)(a.aY,{className:"flex w-full flex-col gap-8 md:flex-row",children:[(0,l.jsxs)("div",{className:"grid w-full grid-cols-2 justify-between md:grid-cols-4",children:[(0,l.jsxs)("div",{className:"grid grid-rows-2 gap-5 md:col-span-2 md:grid-cols-2 md:grid-rows-1",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,l.jsx)(n._,{className:"text-sm font-semibold",children:"Customer Name"}),(0,l.jsx)("small",{children:null==f?void 0:f.customerName})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,l.jsx)(n._,{className:"text-sm font-semibold",children:"Phone Number"}),(0,l.jsx)("small",{children:null==f?void 0:f.customerContact})]})]}),(0,l.jsxs)("div",{className:"grid grid-rows-2 gap-5 md:col-span-2 md:grid-cols-2 md:grid-rows-1",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,l.jsx)(n._,{className:"text-sm font-semibold",children:"Sales Date"}),(0,l.jsx)("small",{children:null==t?void 0:t.salesDate})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,l.jsx)(n._,{className:"text-sm font-semibold",children:"Sales Value"}),(0,l.jsx)("small",{children:(0,i.lb)(null!==(e=null==t?void 0:t.totalCost)&&void 0!==e?e:"")})]})]})]}),(0,l.jsx)("div",{className:"self-end",children:(0,l.jsx)(s.z,{variant:"outline",className:"max-w-[200px]",children:"+ New Payment"})})]})}),(0,l.jsx)("div",{children:(0,l.jsx)(c.Z,{columns:o,rowCount:0,data:null!=x?x:[]})})]})}},72171:(e,r,t)=>{"use strict";t.d(r,{Z:()=>o});var l=t(12428),s=t(41868),a=t(13920),n=t(66115),i=t(6969),d=t(55480);function o(e){var r;let{columns:t,data:o,rowCount:c}=e,[u,m]=(0,d.v1)("page",{defaultValue:"0"}),f=(0,s.b7)({data:o,columns:t,manualPagination:!0,getCoreRowModel:(0,a.sC)(),getPaginationRowModel:(0,a.G_)(),rowCount:c}),x=Math.ceil(c/10),v=()=>{f.nextPage(),m(e=>(+e+1).toString())},h=()=>{f.previousPage(),m(e=>(+e-1).toString())};return(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"rounded-md border",children:(0,l.jsxs)(n.iA,{children:[(0,l.jsx)(n.xD,{children:f.getHeaderGroups().map(e=>(0,l.jsx)(n.SC,{children:e.headers.map(e=>(0,l.jsx)(n.ss,{children:e.isPlaceholder?null:(0,s.ie)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,l.jsx)(n.RM,{children:(null===(r=f.getRowModel().rows)||void 0===r?void 0:r.length)?f.getRowModel().rows.map(e=>(0,l.jsx)(n.SC,{className:"","data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,l.jsx)(n.pj,{children:(0,s.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,l.jsx)(n.SC,{children:(0,l.jsx)(n.pj,{colSpan:t.length,className:"h-24 text-center",children:"No results."})})})]})}),c>10&&(0,l.jsxs)("div",{className:"flex items-center justify-end space-x-2 py-4",children:[(0,l.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>{h()},disabled:0===Number(u),children:"Previous"}),(0,l.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>{v()},disabled:Number(u)===x-1||Number(u)>x-1,children:"Next"})]})]})}},6969:(e,r,t)=>{"use strict";t.d(r,{d:()=>d,z:()=>o});var l=t(12428),s=t(93264),a=t(8190),n=t(51699),i=t(29892);let d=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,r)=>{let{className:t,variant:s,size:n,asChild:o=!1,...c}=e,u=o?a.g7:"button";return(0,l.jsx)(u,{className:(0,i.cn)(d({variant:s,size:n,className:t})),ref:r,...c})});o.displayName="Button"},53995:(e,r,t)=>{"use strict";t.d(r,{Ol:()=>i,Zb:()=>n,aY:()=>o,ll:()=>d});var l=t(12428),s=t(93264),a=t(29892);let n=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,l.jsx)("div",{ref:r,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s})});n.displayName="Card";let i=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,l.jsx)("div",{ref:r,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",t),...s})});i.displayName="CardHeader";let d=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,l.jsx)("h3",{ref:r,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",t),...s})});d.displayName="CardTitle",s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,l.jsx)("p",{ref:r,className:(0,a.cn)("text-sm text-muted-foreground",t),...s})}).displayName="CardDescription";let o=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,l.jsx)("div",{ref:r,className:(0,a.cn)(" py-3 px-6",t),...s})});o.displayName="CardContent",s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,l.jsx)("div",{ref:r,className:(0,a.cn)("flex items-center p-6 pt-0",t),...s})}).displayName="CardFooter"},76484:(e,r,t)=>{"use strict";t.d(r,{_:()=>o});var l=t(12428),s=t(93264),a=t(17492),n=t(51699),i=t(29892);let d=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,l.jsx)(a.f,{ref:r,className:(0,i.cn)(d(),t),...s})});o.displayName=a.f.displayName},66115:(e,r,t)=>{"use strict";t.d(r,{RM:()=>d,SC:()=>o,iA:()=>n,pj:()=>u,ss:()=>c,xD:()=>i});var l=t(12428),s=t(93264),a=t(29892);let n=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,l.jsx)("div",{className:"relative w-full overflow-auto",children:(0,l.jsx)("table",{ref:r,className:(0,a.cn)("w-full caption-bottom text-sm",t),...s})})});n.displayName="Table";let i=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,l.jsx)("thead",{ref:r,className:(0,a.cn)("[&_tr]:border-b",t),...s})});i.displayName="TableHeader";let d=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,l.jsx)("tbody",{ref:r,className:(0,a.cn)("[&_tr:last-child]:border-0",t),...s})});d.displayName="TableBody",s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,l.jsx)("tfoot",{ref:r,className:(0,a.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...s})}).displayName="TableFooter";let o=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,l.jsx)("tr",{ref:r,className:(0,a.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...s})});o.displayName="TableRow";let c=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,l.jsx)("th",{ref:r,className:(0,a.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...s})});c.displayName="TableHead";let u=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,l.jsx)("td",{ref:r,className:(0,a.cn)("px-4 py-1.5 align-middle [&:has([role=checkbox])]:pr-0",t),...s})});u.displayName="TableCell",s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,l.jsx)("caption",{ref:r,className:(0,a.cn)("mt-4 text-sm text-muted-foreground",t),...s})}).displayName="TableCaption"},29892:(e,r,t)=>{"use strict";t.d(r,{Xv:()=>i,cn:()=>a,lb:()=>n});var l=t(44273),s=t(17585);function a(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.m6)((0,l.W)(r))}function n(e){if(void 0!==e)return new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(+e)}function i(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;if(null==e)return;let t=" ",l=0;for(let s=0;s<e.length&&l<r;s++)if(" "!==e[s])for(t+=e[s],l++;" "!==e[s+1]&&void 0!==e[s+1];)s++;return t}},31874:(e,r,t)=>{"use strict";let l;t.d(r,{H:()=>v,h:()=>x});var s=t(12428),a=t(85763),n=t(35713),i=t(45447),d=t(93264),o=t(67321),c=t(15357),u=t(78916);let m=()=>new n.S,f=()=>null!=l?l:l=m(),x=(0,a.ec)();function v(e){let r=f(),[t]=(0,d.useState)(()=>x.createClient({links:[(0,a.gb)({enabled:e=>"development"===u.env.VERCEL_ENV||"down"===e.direction&&e.result instanceof Error}),(0,a.Pq)({transformer:c.ZP,url:window.location.origin+"/api/trpc",headers:()=>{let e=new Headers;return e.set("x-trpc-source","nextjs-react"),e}})]}));return(0,s.jsxs)(i.aH,{client:r,children:[(0,s.jsx)(x.Provider,{client:t,queryClient:r,children:e.children}),(0,s.jsx)(o.t,{initialIsOpen:!1,buttonPosition:"bottom-left"})]})}},47576:(e,r,t)=>{"use strict";var l=t(96151);t.o(l,"useParams")&&t.d(r,{useParams:function(){return l.useParams}}),t.o(l,"useRouter")&&t.d(r,{useRouter:function(){return l.useRouter}}),t.o(l,"useSearchParams")&&t.d(r,{useSearchParams:function(){return l.useSearchParams}})},17492:(e,r,t)=>{"use strict";t.d(r,{f:()=>i});var l=t(93264),s=t(95641),a=t(12428),n=l.forwardRef((e,r)=>(0,a.jsx)(s.WV.label,{...e,ref:r,onMouseDown:r=>{var t;r.target.closest("button, input, select, textarea")||(null===(t=e.onMouseDown)||void 0===t||t.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));n.displayName="Label";var i=n},95641:(e,r,t)=>{"use strict";t.d(r,{WV:()=>i,jH:()=>d});var l=t(93264),s=t(36720),a=t(8190),n=t(12428),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,r)=>{let t=l.forwardRef((e,t)=>{let{asChild:l,...s}=e,i=l?a.g7:r;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,n.jsx)(i,{...s,ref:t})});return t.displayName=`Primitive.${r}`,{...e,[r]:t}},{});function d(e,r){e&&s.flushSync(()=>e.dispatchEvent(r))}}},e=>{var r=r=>e(e.s=r);e.O(0,[2631,3612,5480,1868,8752,5648,1744],()=>r(81835)),_N_E=e.O()}]);