(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3225],{37351:(e,t,s)=>{Promise.resolve().then(s.bind(s,79055)),Promise.resolve().then(s.bind(s,37181)),Promise.resolve().then(s.bind(s,34911)),Promise.resolve().then(s.bind(s,54611)),Promise.resolve().then(s.t.bind(s,76522,23))},79055:(e,t,s)=>{"use strict";s.d(t,{default:()=>p});var a=s(12428),r=s(7676),n=s(59203),l=s(97093),d=s(81277),i=s(97858),o=s(53995);function c(){return(0,a.jsx)(o.Zb,{className:" border-none shadow-none",children:(0,a.jsx)(i.O,{className:"h-[125px] w-full"})})}function u(e){let{isLoading:t,cardTitle:s,cardIcon:r,numbers:n,description:l}=e;return t?(0,a.jsx)(c,{}):(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(o.ll,{className:"text-sm font-medium",children:s}),r]}),(0,a.jsxs)(o.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:n}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:l})]})]})}var m=s(52981),f=s(29892),x=s(31874),h=s(47576);function p(){var e,t,s,i;let{salesData:o,isPending:c}=(0,m.Z)(),{salesData:p,isPending:v}=(0,m.Z)("credit"),{expenses:g,isPending:j}=function(){let e=(0,h.useSearchParams)(),t=e.get("from"),s=e.get("to"),{data:a,isPending:r}=x.h.expense.listExpenses.useQuery({startDate:null!=t?t:void 0,endDate:null!=s?s:void 0});return{expenses:null==a?void 0:a.expenses,isPending:r}}(),y=null==o?void 0:o.reduce((e,t)=>{var s;return e+parseInt(null!==(s=null==t?void 0:t.totalCost)&&void 0!==s?s:"")},0),N=null==g?void 0:g.reduce((e,t)=>{var s;return e+parseInt(null!==(s=t.expenseAmount)&&void 0!==s?s:"")},0),b=(null!=y?y:0)-(null!=N?N:0),w=null==p?void 0:p.reduce((e,t)=>{var s;return e+parseInt(null!==(s=null==t?void 0:t.totalCost)&&void 0!==s?s:"")},0);return(0,a.jsx)("div",{className:"flex flex-col gap-2",children:(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsx)(u,{isLoading:c,cardTitle:"Net Profit",cardIcon:(0,a.jsx)(r.Z,{className:"size-4 text-muted-foreground"}),numbers:null!==(e=(0,f.lb)(b))&&void 0!==e?e:"",description:"+20.1% from last month"}),(0,a.jsx)(u,{isLoading:c,cardTitle:"Sales Revenue",cardIcon:(0,a.jsx)(n.Z,{className:"size-4 text-muted-foreground"}),numbers:null!==(t=(0,f.lb)(null!=y?y:0))&&void 0!==t?t:"",description:"+20.1% from last month"}),(0,a.jsx)(u,{isLoading:j,cardTitle:"Total Expenditure",cardIcon:(0,a.jsx)(l.Z,{className:"size-4 text-muted-foreground"}),numbers:null!==(s=(0,f.lb)(null!=N?N:0))&&void 0!==s?s:"",description:"+20.1% from last month"}),(0,a.jsx)(u,{isLoading:v,cardTitle:"Pending Credit Sales",cardIcon:(0,a.jsx)(d.Z,{className:"size-4 text-muted-foreground"}),numbers:null!==(i=(0,f.lb)(null!=w?w:0))&&void 0!==i?i:"",description:"+20.1% from last month"})]})})}},37181:(e,t,s)=>{"use strict";s.d(t,{RecentSales:()=>o});var a=s(12428),r=s(95973),n=s(52981),l=s(29892),d=s(97858);function i(){return(0,a.jsx)("div",{className:" space-y-6",children:Array.from({length:5}).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(d.O,{className:"h-12 w-12 rounded-full"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.O,{className:"h-4 w-[250px]"}),(0,a.jsx)(d.O,{className:"h-4 w-[200px]"})]})]},t))})}function o(){let{salesDataWithCustomers:e,isPending:t}=(0,n.Z)(),s=null==e?void 0:e.splice(0,5);return(console.log("salesWithCustomers",e),t)?(0,a.jsx)(i,{}):(0,a.jsx)("div",{className:"space-y-8",children:null==s?void 0:s.map(e=>{var t,s,n,d,i;return(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(r.Avatar,{className:"h-9 w-9",children:(0,a.jsx)(r.AvatarFallback,{children:(0,l.Xv)(null==e?void 0:null===(t=e.customers)||void 0===t?void 0:t.customerName,2)})}),(0,a.jsxs)("div",{className:"ml-4 space-y-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium leading-none",children:null==e?void 0:null===(s=e.customers)||void 0===s?void 0:s.customerName}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:null==e?void 0:null===(n=e.customers)||void 0===n?void 0:n.customerContact})]}),(0,a.jsx)("div",{className:"ml-auto font-medium",children:(0,l.lb)(Number(null===(d=e.sales)||void 0===d?void 0:d.totalCost))})]},null==e?void 0:null===(i=e.sales)||void 0===i?void 0:i.salesId)})})}},34911:(e,t,s)=>{"use strict";s.d(t,{SalesOverviewChart:()=>x});var a=s(12428),r=s(84649),n=s(7720),l=s(13289),d=s(20690),i=s(9559),o=s(31874),c=s(47576),u=s(53995),m=s(97858);function f(){return(0,a.jsxs)(u.Zb,{className:"grid grid-cols-12 border-none items-end gap-3 shadow-none",children:[(0,a.jsx)(m.O,{className:" h-[200px] "}),(0,a.jsx)(m.O,{className:" h-[150px] "}),(0,a.jsx)(m.O,{className:" h-[300px] "}),(0,a.jsx)(m.O,{className:" h-[160px] "}),(0,a.jsx)(m.O,{className:" h-[210px] "}),(0,a.jsx)(m.O,{className:" h-[250px] "}),(0,a.jsx)(m.O,{className:" h-[280px] "}),(0,a.jsx)(m.O,{className:" h-[180px] "}),(0,a.jsx)(m.O,{className:" h-[110px] "}),(0,a.jsx)(m.O,{className:" h-[280px] "}),(0,a.jsx)(m.O,{className:" h-[150px] "}),(0,a.jsx)(m.O,{className:" h-[200px] "})]})}function x(){let{monthlySales:e,isPending:t}=function(){let e=(0,c.useSearchParams)(),t=e.get("from"),s=e.get("to"),{data:a,isPending:r}=o.h.sales.listMonthlySales.useQuery({startDate:null!=t?t:void 0,endDate:null!=s?s:void 0});return{monthlySales:a,isPending:r}}();return t?(0,a.jsx)(f,{}):(0,a.jsx)(r.h,{width:"100%",height:300,children:(0,a.jsxs)(n.v,{data:e,children:[(0,a.jsx)(l.K,{dataKey:"month",stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1}),(0,a.jsx)(d.B,{stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:e=>"Ksh ".concat(e)}),(0,a.jsx)(i.$,{dataKey:"total",fill:"currentColor",radius:[4,4,0,0],className:"fill-primary"})]})})}},52981:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var a=s(31874),r=s(47576);function n(e){let t=(0,r.useSearchParams)(),s=t.get("from"),n=t.get("to"),{data:l,isPending:d}=a.h.sales.listSales.useQuery({startDate:null!=s?s:void 0,endDate:null!=n?n:void 0,paymentMethod:e?"all"===e?void 0:e:void 0});return{salesData:null==l?void 0:l.sales.map(e=>e.sales),isPending:d,salesDataWithCustomers:null==l?void 0:l.sales}}},54611:(e,t,s)=>{"use strict";s.d(t,{default:()=>x});var a=s(12428),r=s(29892),n=s(59766),l=s(34549),d=s(93264),i=s(90707),o=s(6969),c=s(78531),u=s(69873),m=s(13240),f=s(55480);function x(e){let{className:t}=e,[s,x]=(0,f.XI)({from:f.mF.withDefault((0,n.e)(new Date,1)),to:f.mF.withDefault(new Date)},{history:"replace"}),[h,p]=(0,d.useState)(s);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:(0,r.cn)("grid gap-2",t),children:(0,a.jsxs)(i.J2,{children:[(0,a.jsx)(i.xo,{asChild:!0,children:(0,a.jsxs)(o.z,{id:"date",variant:"outline",className:(0,r.cn)("w-[300px] justify-start text-left font-normal",!s&&"text-muted-foreground"),children:[(0,a.jsx)(c.Z,{className:"mr-2 h-4 w-4"}),(null==h?void 0:h.from)?h.to?(0,a.jsxs)(a.Fragment,{children:[(0,l.WU)(h.from,"LLL dd, y")," - ",(0,l.WU)(h.to,"LLL dd, y")]}):(0,l.WU)(h.from,"LLL dd, y"):(0,a.jsx)("span",{children:"Pick a date"})]})}),(0,a.jsx)(i.yk,{className:"mr-1 w-auto p-0",align:"start",children:(0,a.jsx)(m.f,{mode:"range",defaultMonth:null==h?void 0:h.from,selected:h,onSelect:e=>{p(e)},numberOfMonths:2})})]})}),(0,a.jsxs)(o.z,{className:"inline-flex gap-2",onClick:()=>{x(h)},children:[(0,a.jsx)(u.Z,{className:"size-5"}),(0,a.jsx)("span",{children:"Filter"})]})]})}},95973:(e,t,s)=>{"use strict";s.d(t,{Avatar:()=>d,AvatarFallback:()=>i});var a=s(12428),r=s(93264),n=s(41172),l=s(29892);let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.fC,{ref:t,className:(0,l.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...r})});d.displayName=n.fC.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.Ee,{ref:t,className:(0,l.cn)("aspect-square h-full w-full",s),...r})}).displayName=n.Ee.displayName;let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.NY,{ref:t,className:(0,l.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...r})});i.displayName=n.NY.displayName},6969:(e,t,s)=>{"use strict";s.d(t,{d:()=>i,z:()=>o});var a=s(12428),r=s(93264),n=s(8190),l=s(51699),d=s(29892);let i=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef((e,t)=>{let{className:s,variant:r,size:l,asChild:o=!1,...c}=e,u=o?n.g7:"button";return(0,a.jsx)(u,{className:(0,d.cn)(i({variant:r,size:l,className:s})),ref:t,...c})});o.displayName="Button"},13240:(e,t,s)=>{"use strict";s.d(t,{f:()=>d});var a=s(12428);s(93264);var r=s(42585),n=s(29892),l=s(6969);function d(e){let{className:t,classNames:s,showOutsideDays:d=!0,...i}=e;return(0,a.jsx)(r._W,{showOutsideDays:d,className:(0,n.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,n.cn)((0,l.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,n.cn)((0,l.d)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...s},components:{},...i})}d.displayName="Calendar"},53995:(e,t,s)=>{"use strict";s.d(t,{Ol:()=>d,Zb:()=>l,aY:()=>o,ll:()=>i});var a=s(12428),r=s(93264),n=s(29892);let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});l.displayName="Card";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...r})});d.displayName="CardHeader";let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});i.displayName="CardTitle",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...r})}).displayName="CardDescription";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)(" py-3 px-6",s),...r})});o.displayName="CardContent",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter"},90707:(e,t,s)=>{"use strict";s.d(t,{J2:()=>d,xo:()=>i,yk:()=>o});var a=s(12428),r=s(93264),n=s(94132),l=s(29892);let d=n.fC,i=n.xz,o=r.forwardRef((e,t)=>{let{className:s,align:r="center",sideOffset:d=4,...i}=e;return(0,a.jsx)(n.h_,{children:(0,a.jsx)(n.VY,{ref:t,align:r,sideOffset:d,className:(0,l.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...i})})});o.displayName=n.VY.displayName},97858:(e,t,s)=>{"use strict";s.d(t,{O:()=>n});var a=s(12428),r=s(29892);function n(e){let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,r.cn)("animate-pulse rounded-md bg-muted",t),...s})}},29892:(e,t,s)=>{"use strict";s.d(t,{Xv:()=>d,cn:()=>n,lb:()=>l});var a=s(44273),r=s(17585);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}function l(e){if(void 0!==e)return new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(+e)}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;if(null==e)return;let s=" ",a=0;for(let r=0;r<e.length&&a<t;r++)if(" "!==e[r])for(s+=e[r],a++;" "!==e[r+1]&&void 0!==e[r+1];)r++;return s}},31874:(e,t,s)=>{"use strict";let a;s.d(t,{H:()=>h,h:()=>x});var r=s(12428),n=s(85763),l=s(35713),d=s(45447),i=s(93264),o=s(67321),c=s(15357),u=s(78916);let m=()=>new l.S,f=()=>null!=a?a:a=m(),x=(0,n.ec)();function h(e){let t=f(),[s]=(0,i.useState)(()=>x.createClient({links:[(0,n.gb)({enabled:e=>"development"===u.env.VERCEL_ENV||"down"===e.direction&&e.result instanceof Error}),(0,n.Pq)({transformer:c.ZP,url:window.location.origin+"/api/trpc",headers:()=>{let e=new Headers;return e.set("x-trpc-source","nextjs-react"),e}})]}));return(0,r.jsxs)(d.aH,{client:t,children:[(0,r.jsx)(x.Provider,{client:s,queryClient:t,children:e.children}),(0,r.jsx)(o.t,{initialIsOpen:!1,buttonPosition:"bottom-left"})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2631,3612,4766,2865,9986,5480,6522,8630,6501,8752,5648,1744],()=>t(37351)),_N_E=e.O()}]);